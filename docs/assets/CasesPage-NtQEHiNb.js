import{G as C,u as $,r as d,h as w,g as x,t as c,c as n,b as l,a as s,F as y,z as D,e as u,o as r,d as V,m as z,A as B}from"./index-01KSE3Zn.js";const N={class:"flex w-full flex-col gap-2 px-64 pb-4"},S={class:"my-4 flex h-96 flex-row items-end justify-between rounded-2xl bg-gradient-to-b from-blue-300 to-blue-400 p-8 shadow-xl"},I=s("div",{class:"flex flex-col"},[s("span",{class:"text-4xl font-semibold leading-none"},"Neuro"),s("span",{class:"text-xl font-medium leading-none"},"Description here")],-1),L={key:0,class:"flex items-center justify-center py-4"},R={key:1,class:"flex items-center justify-center py-4"},j=s("h2",null,"No cases created",-1),A=[j],M={__name:"CasesPage",setup(F){const g=C(),f=$(),i=d(null),h=d(!0);w(async()=>{await x({method:"get",url:`https://ncp-api-uzr5.onrender.com/api/v2/case-scenarios/${g.params.category}`,headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"}}).then(e=>{i.value=e.data}).catch(e=>{e.response.status==401?f.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>h.value=!1)});const p=d(!1),o=d({state:!1,id:null,index:null,toggle(e,t){this.state=!this.state,this.id=e,this.index=t},async confirm(){this.state=!this.state,c.add({msg:"Deleting Case",duration:1e3}),p.value=!0,await x({method:"delete",url:`https://ncp-api-uzr5.onrender.com/api/v2/case-scenarios/${g.params.category}/${this.id}`,headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"}}).then(()=>{i.value.splice(this.index,1),c.add({msg:"Case deleted",duration:4e3})}).catch(e=>{e.response.status==401?f.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>p.value=!1)}});return(e,t)=>{const v=u("VIconButton"),_=u("VLoader"),b=u("router-link"),k=u("VDialog");return r(),n(y,null,[l(v,{onClick:t[0]||(t[0]=a=>e.$router.replace({name:"admin dashboard"})),icon:"arrow_back",variant:"ghost",size:"lg",class:"!sticky left-52 top-[100px] !w-fit"}),s("div",N,[s("div",S,[I,s("button",{onClick:t[1]||(t[1]=a=>e.$router.push({name:"admin create case",params:{category:"neuro"}})),class:"rounded-full px-4 py-2 text-2xl font-medium transition-colors hover:bg-blue-950/10"}," + New Case ")]),h.value?(r(),n("div",L,[l(_,{size:"32px",thickness:"2px"})])):i.value.length===0?(r(),n("div",R,A)):(r(!0),n(y,{key:2},D(i.value,(a,m)=>(r(),n("div",{key:a.id,class:"flex flex-row items-center rounded-2xl border border-neutral-400 pr-10 transition-colors hover:bg-neutral-400/20"},[l(b,{to:{name:"admin edit case",params:{number:m+1,id:a.id,category:"neuro"}},class:"grow py-4 pl-10 text-xl font-medium"},{default:V(()=>[z("Case Scenario "+B(m+1),1)]),_:2},1032,["to"]),l(v,{onClick:E=>o.value.toggle(a.id,m),disabled:p.value,variant:"ghost",color:"error",size:"lg",icon:"delete",class:"shrink-0"},null,8,["onClick","disabled"])]))),128))]),l(k,{"go-open":o.value.state,"onUpdate:goOpen":t[2]||(t[2]=a=>o.value.state=a),header:"Case Deletion",body:`Do you want to delete Case Scenario ${o.value.index+1}?`,"cancel-label":"No","confirm-label":"Yes",onConfirm:t[3]||(t[3]=a=>o.value.confirm())},null,8,["go-open","body"])],64)}}};export{M as default};
